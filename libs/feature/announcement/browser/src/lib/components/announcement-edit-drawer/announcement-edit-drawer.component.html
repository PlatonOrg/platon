<ui-modal-drawer size="large" title="Modifier l'annonce" #drawer>
  <ng-template>
    <form *ngIf="currentAnnouncement" nz-form [formGroup]="form" (ngSubmit)="save(drawer)">
      <nz-spin [nzSpinning]="loading">
        <!-- Titre -->
        <nz-form-item>
          <nz-form-label nzRequired nzFor="title">Titre</nz-form-label>
          <nz-form-control nzErrorTip="Veuillez saisir un titre">
            <input nz-input formControlName="title" id="title" placeholder="Titre de l'annonce" />
          </nz-form-control>
        </nz-form-item>

        <!-- Description -->
        <nz-form-item>
          <nz-form-label nzRequired nzFor="description">Description brève</nz-form-label>
          <nz-form-control nzErrorTip="Veuillez saisir une description">
            <input
              nz-input
              formControlName="description"
              id="description"
              placeholder="Description courte de l'annonce"
            />
          </nz-form-control>
        </nz-form-item>

        <!-- Icône -->
        <nz-form-item>
          <nz-form-label nzFor="icon">Icône</nz-form-label>
          <nz-form-control>
            <nz-select formControlName="icon" id="icon">
              <nz-option *ngFor="let icon of iconOptions" [nzValue]="icon" [nzLabel]="icon">
                <span nz-icon [nzType]="icon" nzTheme="outline"></span> {{ icon }}
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <!-- Actif -->
        <nz-form-item>
          <nz-form-label nzFor="active">Actif</nz-form-label>
          <nz-form-control>
            <nz-switch formControlName="active"></nz-switch>
          </nz-form-control>
        </nz-form-item>

        <!-- Rôles ciblés -->
        <nz-form-item>
          <nz-form-label nzFor="targetedRoles">Rôles ciblés</nz-form-label>
          <nz-form-control nzExtra="Laissez vide pour cibler tous les rôles">
            <nz-select
              formControlName="targetedRoles"
              nzMode="multiple"
              nzAllowClear
              nzPlaceHolder="Sélectionner les rôles"
            >
              <nz-option *ngFor="let role of userRoles" [nzValue]="role" [nzLabel]="role"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <!-- Date d'affichage -->
        <nz-form-item>
          <nz-form-label nzFor="displayUntil">Afficher jusqu'au</nz-form-label>
          <nz-form-control>
            <nz-date-picker formControlName="displayUntil" nzShowTime></nz-date-picker>
          </nz-form-control>
        </nz-form-item>

        <!-- Durée d'affichage -->
        <nz-form-item>
          <nz-form-label nzFor="displayDurationInDays">Durée d'affichage (jours)</nz-form-label>
          <nz-form-control>
            <nz-input-number formControlName="displayDurationInDays" [nzMin]="1"></nz-input-number>
          </nz-form-control>
        </nz-form-item>

        <!-- Contenu EditorJS -->
        <nz-form-item>
          <nz-form-label nzFor="data">Contenu</nz-form-label>
          <nz-form-control>
            <ui-editorjs formControlName="data"></ui-editorjs>
          </nz-form-control>
        </nz-form-item>

        <div class="button-container">
          <button nz-button nzType="primary" type="submit" [disabled]="loading">Mettre à jour</button>
          <button nz-button (click)="drawer.close()">Annuler</button>
        </div>
      </nz-spin>
    </form>
  </ng-template>
</ui-modal-drawer>
