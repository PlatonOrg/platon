<div class="restrictions-container">
  @if (restrictions.length > 0) {
  <!-- Header de la période avec bouton de suppression -->
  <div class="period-header">
    <div class="period-title">
      <span class="period-badge">{{ index + 1 }}</span>
      <span>Période d'accès</span>
    </div>
    @if (index !== 0) {
    <button
      class="delete-period-btn"
      (click)="removeAllRestrictions()"
      nz-tooltip="Supprimer cette période"
      nzTooltipPlacement="left"
    >
      <i nz-icon nzType="close" nzTheme="outline"></i>
    </button>
    }
  </div>

  <!-- Contenu des restrictions -->
  <div class="restrictions-content">
    @for (restriction of restrictions; track restriction; let i = $index) {
    <div class="restriction-item">
      <course-restriction
        [restriction]="restriction"
        [courseGroups]="courseGroups"
        [courseMembers]="courseMembers"
        [isMainRestriction]="index === 0"
        (remove)="removeRestriction(i)"
      ></course-restriction>
    </div>
    }

    <!-- Component propositions (modal/drawer) -->
    <course-propositions
      *ngIf="isOpenProposition"
      (closeEvent)="closeBottomSheet()"
      (sendEvent)="selectOption($event)"
      [typesRequired]="typesRestrictionPresent"
    ></course-propositions>

    <!-- Bouton d'ajout de règle -->
    @if (!containsCorrectorsAndOthers() && restrictions.length < 4) {
    <div class="add-restriction-button">
      <button nz-button nzBlock class="add-rule-btn" (click)="openBottomSheet()">
        <i nz-icon nzType="plus"></i>
        Ajouter une règle
      </button>
    </div>
    }
  </div>
  }
</div>
