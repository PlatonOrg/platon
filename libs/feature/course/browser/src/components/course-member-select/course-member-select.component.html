<nz-tree-select
  [ngModel]="selection"
  [nzNodes]="nodes"
  (ngModelChange)="onChangeSelection($event)"
  [nzShowSearch]="true"
  [nzCheckable]="true"
  [nzDisabled]="disabled"
  [nzPlaceHolder]="placeholder || ''"
  [nzTreeTemplate]="template"
  [nzVirtualHeight]="nodes.length <= 15 ? '' : '300px'"
  [nzMultiple]="true"
/>

<ng-template #template let-node>
  @if(node.origin.key === '__SELECT_ALL__'){
  <span>{{ node.origin.title }}</span>
  }
  <user-avatar
    *ngIf="node.origin.key !== '__SELECT_ALL__'"
    [size]="24"
    [user]="node.origin.value.user"
    [group]="node.origin.value.group"
  />
</ng-template>
